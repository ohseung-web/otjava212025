package multiexample;

import java.util.Scanner;

public class ShoppingMall {

	public static void main(String[] args) {
		
//		<문제> 쇼핑몰 [장바구니]
//				1. 로그인 후 쇼핑 메뉴를 선택하면, 다음과 같이 상품목록을 보여준다.
//				    1) 사과
//				    2) 바나나
//				    3) 딸기
//				2. 번호를 선택해 상품을 장바구니에 담을 수 있다.
//				3. 로그인 회원의 인덱스 번호는 각 행의 첫번째 열에 저장한다.
//				4. 해당 회원이 구매한 상품의 인덱스 번호는 각 행의 두번째 열에 저장한다.
//				5. [전체출력]은 로그아웃 상태에서만 출력되도록 작성한다.
//
//				    String[] ids = {"qwer", "javaking", "abcd"};
//				    String[] pws = {"1111", "2222", "3333"};
//				    String[] items = {"사과", "바나나", "딸기"};
//				   int MAX_SIZE = 100;
//				   int[][] jang = new int[MAX_SIZE][2];
//
//				    예)
//				{
//						{0, 0},				qwer회원 			> 사과구매
//						{1, 1},				javaking회원 		> 바나나구매
//				 		{2, 0},				abcd회원			> 사과구매
//						{0, 2},				qwer회원			> 딸기구매
//						...
//				}
		
			Scanner scan = new Scanner(System.in);
			String[] ids = {"qwer", "javaking", "abcd"};
		    String[] pws = {"1111", "2222", "3333"};
		    String[] items = {"사과", "바나나", "딸기"};
		    int MAX_SIZE = 100;
		    int[][] jang = new int[MAX_SIZE][2];
		    
		    boolean run = true;
		    int log = -1; //로그아웃 체크키
		    int count = 0; //아이템을 사는 개수
		    // 아이디별 아이템개수 저장
		    int[][] cartcount = new int[ids.length][items.length]; 
		    
		    while(run) {
		    	System.out.println("-----------");
		    	System.out.print("상태 :");
		    	if(log == -1) {
		    		System.out.println("로그아웃");
		    	}else {
		    		System.out.println(ids[log]);
		    	}
		    	System.out.println("-----------");
		    	System.out.println("[GREEN MART]");
		    	System.out.printf("[1]로그인%n[2]로그아웃%n[3]쇼핑%n[4]장바구니%n[5]전체출력%n[0]종료%n");
		    	System.out.print("메뉴 선택 : ");
		    	int sel = scan.nextInt();
		    	
		    	if(sel == 1) { // 로그인
		    		System.out.print("ID입력 : ");
		    		String myId = scan.next();
		    		System.out.print("PW입력 : ");
		    		String myPw = scan.next();
		    		
		    		for(int i=0; i<ids.length; i++) {
		    			if(ids[i].equals(myId) && pws[i].equals(myPw) 
		    				&& ids[i].isEmpty()==false && pws[i].isEmpty()==false) {
		    				log = i;
		    			}
		    		}
		    		if(log != -1) {
		    			System.out.println(ids[log]+"님, 환영합니다.");
		    		}else {
	    				System.out.println("아이디와 비밀번호를 확인해주세요.");
	    			}
		    		
		    	}else if(sel == 2) { //로그아웃
		    		log = -1;
		    		System.out.println("로그아웃 되었습니다.");
		    	}else if(sel == 3) { // 쇼핑
		    		// 쇼핑목록 출력
		    		if(log == -1) {
		    			System.out.println("로그인 후 이용 가능");
		    		}
		    		// 쇼핑목록 반복이 필요
		    		while(run) {
		    			System.out.println("[상품목록]");
			    		for(int i=0; i<items.length; i++) {
			    			System.out.printf("[%d]%s%n",(i+1),items[i]);
			    		}
			    		System.out.println("[4]뒤로가기");
			    		System.out.print("상품번호를 선택하세요 :");
			    		int itemNum = scan.nextInt();
			    		   if(itemNum == 4) {
			    			//뒤로가기
			    			break;
			    		   }
			    		   // ids별로 쇼핑한 items들의 개수를 cartcount에 담는다. 
			    		   jang[count][0] = log; // 장바구니 0번째 열에 log인 한 index 번호를 담는다.
			    		   jang[count][1] = itemNum-1;// 장바구니 1번째 열에 내가 산 item index 번호를 담는다.
			    		   cartcount[log][itemNum-1]++;// id별 쇼핑한 itemt들의 개수를 item별로 cartcount에 담는다.
			    		   count ++;
		    		   }
		    		
		    	}else if(sel == 4) { //장바구니
		    		// 내 장바구니는 로그인 상태에서만 가능
		    		if(log == -1) {
		    			System.out.println("로그인 후 이용 가능");
		    		}else {
		    			System.out.println("--- 내 장바구니 목록 ---");
			    		for(int i=0; i<items.length; i++) {
			    		  System.out.println(items[i]+": "+cartcount[log][i]+"개");
			    		  }
		    		 }
		    		
		    	}else if(sel == 5) {
		    	  // 전체 장바구니 목록은 로그아웃 시에서만 가능
		    		if(log == -1) {
		    			System.out.println("-- 전체 장바구니 목록 --");
		    			for(int i=0; i<count; i++) {
		    				System.out.println(ids[jang[i][0]]+": "+items[jang[i][1]]);
		    			}
		    		}

		    	  
		    	}else { // 종료
		    		run = false;
		    		System.out.println("프로그램 종료");
		    	}
		    	
		    }
		    
		    scan.close();

	}

}
